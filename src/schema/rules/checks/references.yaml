---
SubjectRelativeIntendedFor:
  selectors:
    - datatype != "ieeg"
    - type(sidecar.IntendedFor) != "null"
    - length(sidecar.IntendedFor) > 0
  checks:
    - exists(sidecar.IntendedFor, "bids-uri") || exists(sidecar.IntendedFor, "subject")

DatasetRelativeIntendedFor:
  selectors:
    - datatype == "ieeg"
    - type(sidecar.IntendedFor) != "null"
    - length(sidecar.IntendedFor) > 0
  checks:
    - exists(sidecar.IntendedFor, "bids-uri") || exists(sidecar.IntendedFor, "dataset")

AssociatedEmptyRoom:
  selectors:
    - suffix == "meg"
    - type(sidecar.AssociatedEmptyRoom) != "null"
    - length(sidecar.AssociatedEmptyRoom) > 0
  checks:
    - exists(sidecar.AssociatedEmptyRoom, "bids-uri") || exists(sidecar.AssociatedEmptyRoom, "dataset")

Sources:
  selectors:
    - dataset.dataset_description.DatasetType == "derivatives"
    - type(sidecar.Sources) != "null"
    - length(sidecar.Sources) > 0
  checks:
    - exists(sidecar.Sources, "bids-uri") || exists(sidecar.Sources, "dataset")

SpatialReferences:
  selectors:
    - dataset.dataset_description.DatasetType == "derivatives"
    - type(sidecar.SpatialReference.URI) != "null"
  checks:
    - exists(sidecar.SpatialReference.URI, "bids-uri") || exists(sidecar.SpatialReference.URI, "dataset")
